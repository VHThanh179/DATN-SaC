@page "/orderlist"
@using Share.Models
@using Server.Data
@using Share.Helpers
@inject Share.Interfaces.IOrderSvc _orderService
@layout MainLayout
<h1 class="font-weight-bold text-center">Danh sách đơn hàng</h1>
@if (orders == null)
{
    <p><em>Loading ...</em></p>
}
else
{
    <table class="table table-hover text-center">
        <thead class="thead-dark">
            <tr>
                <th>Khách hàng</th>
                <th>Địa chỉ</th>
                <th>Ngày đặt</th>
                <th>Tổng tiền</th>
                <th>Trạng thái</th>
                <th>Ghi chú</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in orders)
            {
                <tr>
                    <td>@item.Customer.Email</td>
                    <td>@item.Customer.Address</td>
                    <td>@item.OrderDate.Date.ToString("dd/MM/yyyy")</td>
                    <td>@item.Total</td>
                    <td>@item.OrderStatus.DisplayName()</td>
                    <td>@item.Notes</td>
                    <td>
                        <a class="btn btn-info" href="/orderdialog/@item.OrderId">Sửa</a>
                        <a class="btn" href="/orderdetail/@item.OrderId">Chi tiết</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    public List<Order> orders;
    protected override void OnInitialized()
    {
        orders = _orderService.GetAllOrder();
    }
}